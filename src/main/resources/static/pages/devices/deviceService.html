<!-- 
*******************************************************************************
 * Copyright Â© 2017-2018 VMware, Inc. All Rights Reserved.
 * 
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 *
 * @author: Huaqiao Zhang, <huaqiaoz@vmware.com>
 * @version: 0.1.0
 *******************************************************************************
 -->
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style type="text/css">
#device_service_btn {
	margin-bottom: 10px;
}

#device_service_btn div.alert-warning {
	display: none;
}

#add_device_content {
	position: absolute;
	left: 0;
	top: 0;
	right: 0;
	bottom: 0;
	display: none;
	background-color: white;
	padding: 10px;
}

#add_device_content h4  {
	margin-bottom: 3px;
}

#add_device_content  input {
	width: 200px;
}

#add_device_content  select {
	width: 200px;
}

.new_device_msg, .new_device_addressable, .related_service , .related_profile {
	padding: 5px;
	border: 1px solid gray;
	margin-bottom: 10px;
}

.new_device_msg table , 
.new_device_addressable table ,
.related_profile table {
	border-collapse: separate;
	
}

.new_device_msg table td, 
.new_device_addressable table td,
.related_profile table td {
	padding: 10px;
	text-align: center;
}

.btn_group {
	text-align: center;
}

.btn_group button:first-child {
	margin-right: 150px;
}

.device_server_shelter {
	position: fixed;
	top: 0;
	bottom: 0;
	left: 0;
	right: 0;
	z-index: 100;
	display: none;
}

.device_server_shelter div.shelter{
	position: absolute;
	width:100%;
	height:100%;
	background-color: #339933;
	opacity: 0.4;
}

.device_server_shelter div:last-child {
	position: absolute;
	top: 50%;
	left: 50%;
}
.device_server_shelter div:last-child *{
	color: white;
}
#profile_file{
	/* opacity: 0; */
	display: none;
}

label:hover  {
	border-bottom: 2px solid;
	border-bottom-color:#339933; 
}
</style>
<script type="text/javascript" src="/js/pages/devices/deviceService.js"></script>
</head>
<body>
	<div class="device_server_shelter">
		<div class="shelter"></div>
		<div>
			<i class="fa fa-spinner fa-pulse fa-3x fa-fw "></i>
			<span >uploading...</span>
		</div>
	</div>
	<div id="device_service_btn">
		<div class="alert alert-warning" role="alert">please select one
			service.</div>
		<button type="button" class="btn btn-success" onclick="deviceServiceBtnGroup.addNewDevice();">
			<i class="fa fa-plus" aria-hidden="true"></i>&nbsp;device
		</button>
		<button type="button" class="btn btn-success" onclick="deviceServiceBtnGroup.refresh();" >
			<i class="fa fa-refresh" aria-hidden="true"></i>&nbsp;refresh
		</button>

	</div>

	<div id="device_service_list">
		<table class="table table-striped ">
			<thead>
				<tr>
					<th></th>
					<th>#</th>
					<th>ID</th>
					<th>Service Name</th>
					<th>label</th>
					<th>OperateState</th>
					<th>adminState</th>
				</tr>
			</thead>
			<tbody>
			</tbody>
			<tfoot>
				<tr align="center">
					<td colspan=8>no data.</td>
				</tr>
			</tfoot>
		</table>
	</div>

	<div id="add_device_content">
		<div>
			<h4>
				<span class="label label-default">new device related profile</span>
			</h4>
		</div>
		<div class="related_profile">
			<table>
				<tr>
					<td>deviceProfile</td>
					<td colspan=2>
						<select name="device_profile_name">
							<option value="">please select</option>
						</select>
					</td>
				</tr>
				<tr>
					<td><label for="profile_file"><span style="color: #339933;opacity: 0.5;">no desired ? upload one.</span></label></td>
					<td id="file_preview">
						
					</td>
					<td>
						<form method="POST" target="uploadiframe" action="/core-metadata/api/v1/deviceprofile/uploadfile" enctype="multipart/form-data" style="display: inline-block;">
							<!-- <label for="profile_file">select</label> -->
							<input type="file" id="profile_file" name="file" onchange="deviceServiceBtnGroup.onSelectedFileCompleted()">
						</form>
						<iframe style="display: none;" name="uploadiframe">	</iframe>
						<button disabled type="button" class="btn btn-default" onclick="deviceServiceBtnGroup.uploadProfile()" style="height:30px;" >
							<i class="fa fa-upload" aria-hidden="true"></i>&nbsp;upload
						</button>
					</td>
				</tr>
			</table>
		</div>
		<div>
			<h4>
				<span class="label label-default">new device info</span>
			</h4>
		</div>
		<div class="new_device_msg">
			<table>
				<tbody>
					<tr>
						<td>name</td>
						<td><input type="text"  name="device_name" placeholder="required and unique" required="required"></td>
						<td>description</td>
						<td><input type="text" name="device_desc"></td>
					</tr>
					<tr>
						<td>adminState</td>
						<td>
							<select name="device_adminState">
								<option>unlocked</option>
								<option>locked</option>
							</select>
						</td>
						<td>operatingState</td>
						<td>
							<select name="device_operatingState">
								<option>enabled</option>
								<option>disabled</option>
							</select>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<div>
			<h4>
				<span class="label label-default">new device addressable</span>
			</h4>
		</div>
		<div class="new_device_addressable">
			<form>
				<table >
					<tr>
						<td>name</td>
						<td><input type="text" name="name" placeholder="unique and required" required></td>
						<td>method</td>
						<td>
							<select name="method">
								<option value="POST">POST</option>
								<option value="GET">GET</option>
							</select>
						</td>
					</tr>
					<tr>
						<td>protocol</td>
						<td>
							<select name="protocol">
								<option value="HTTP">HTTP</option>
								<option value="TCP">TCP</option>
								<option value="MAC">MAC</option>
								<option value="ZMQ">ZMQ</option>
								<option value="OTHER">OTHER</option>
							</select>
						</td>
						<td>address</td>
						<td><input type="text" name="address"></td>
					</tr>
					<tr>
						<td>port</td>
						<td><input type="text" name="port" ></td>
						<td>path</td>
						<td><input type="text" name="path" placeholder="for callback e.g /api/callback"></td>
					</tr>
					<tr>
						<td>publisher</td>
						<td><input type="text" name="publisher"></td>
						<td>user</td>
						<td><input type="text" name="user"></td>
					</tr>
					<tr>
						<td>password</td>
						<td><input type="text" name="password"></td>
						<td>topic</td>
						<td><input type="text" name="topic"></td>
					</tr>
				</table>
			</form>
		</div>
		<div>
			<h4>
				<span class="label label-default">new device related service</span>
			</h4>
		</div>
		<div class="related_service">
			deviceService
			<input type="text" name="device_service_name" disabled>
		</div>
		<div class="btn_group">
			<button type="button" class="btn btn-success" onclick="deviceServiceBtnGroup.back();">
				<i class="fa fa-arrow-left" aria-hidden="true"></i>&nbsp;back
			</button>
			<button type="button" class="btn btn-success" onclick="deviceServiceBtnGroup.submit();">
				<i class="fa fa-check" aria-hidden="true"></i>&nbsp;submit
			</button>
		</div>
	</div>
</body>
</html>